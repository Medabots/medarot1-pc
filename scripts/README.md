# Scripts

This directory contains all the scripts used for facilitating game disassembly and modification. 

This section explains the naming conventions and their meanings, as well as resource file format types.

## common/*

Useful modules for various tasks. 

Example usage:
```
sys.path.append(os.path.join(os.path.dirname(__file__), 'common'))
from common import utils
```

### utils

Library providing useful utility functions for this repository such as reading resource files and reading data from the baserom. 

Most scripts in this repository use it.

### gfx, png

Library for graphics and generating more useful human-readable outputs. Not Medarot-specific.

Refer to dump_tilesets.py for usage examples.

### tilemaps

Library for handling tilemaps in the first generation Medarot games. 

Refer to dump_tilemaps.py for usage examples.

### tilesets

Library for handling tilesets in the first generation Medarot games, including handling the first-generation [Malias format](https://wiki.telefang.net/Wikifang:Telefang_1_Translation_Patch/Malias_compression) compression and decompression.

Refer to dump_tilesets.py for usage examples.

## res/*

Resource files that can be hand-created or generated by scripts.

### res/\*.tbl

Table files that define a dictionary in the format:

```
Key1=Value1
...
KeyN=ValueN
```

Read by 'utils.read_table'. 

### res/tilesets/\*.lst

List files that are used to represent characters in a tileset without explicitly defining a key (as tilesets can be loaded into arbitrary locations, it's easier to keep track of their relative offsets from their load offsets). 

The format is simply one mapping per line. The initial counter is 0, but the '\|' character can be used to skip entries.

```
|81
A
B
|90
C
```

would define a map of 3 characters:

```
map[base offset + 0x81] = 'A'
map[base offset + 0x82] = 'B'
map[base offset + 0x90] = 'C'
```

## dump_*.py

Used to dump various data from the base game. All require the 'baserom' as input, and may require or generate various resource files. 

Will override things in a translation branch, so should normally be avoided.

## xxxx2yyyy.py

Conversion scripts from format 'xxxx' to 'yyyy'. 

Examples:

* ptrlist2asm.py converts ptrlist text files into asm files for use when building.

* tileset2malias.py converts tileset png files into malias compressed files for use when building.
